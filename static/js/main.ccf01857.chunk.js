(this["webpackJsonplim013-fe-burger-queen"]=this["webpackJsonplim013-fe-burger-queen"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(2),a=n(26),r=n.n(a),s=(n(41),n(12)),o=n(20),u=n(13),l=n(8),d=n(4),j=(n(42),function(){return Object(c.jsx)("div",{className:"bg-home",children:Object(c.jsxs)("div",{className:"home-view",children:[Object(c.jsx)("h1",{children:"\xbfQui\xe9n eres?"}),Object(c.jsxs)("div",{className:"routes",children:[Object(c.jsx)(s.b,{to:"/waiter",children:"Mesero"}),Object(c.jsx)(s.b,{to:"/kitchen",children:"Cocinero"})]})]})})}),b=n(29),h=n.n(b),O=(n(59),n(35)),m=(n(64),O.a.initializeApp({apiKey:"AIzaSyDDTLbzCMYBOP8YToX7vyZQWtrs6KtDCUI",authDomain:"burguer-queen-d21f6.firebaseapp.com",projectId:"burguer-queen-d21f6",storageBucket:"burguer-queen-d21f6.appspot.com",messagingSenderId:"110811223073",appId:"1:110811223073:web:5c8954850d5a100071ff60"}).firestore()),p={createOrder:function(e,t){m.collection("orders").doc().set({client:t.client,table:t.table,time:new Date,endTime:null,items:e,status:"Pending"})},getOrder:function(e,t){m.collection("orders").where("status","==",t).orderBy("time","desc").onSnapshot((function(t){var n=[];t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e(n)}))},getMenu:function(e){return m.collection("items").where("menu","==",e).get().then((function(e){var t=[];return e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))})),t}))},getOrdersDone:function(){return m.collection("orders").where("status","==","Done").get().then((function(e){var t=[];return e.forEach((function(e){t.push(e.data())})),t}))},getFinalTime:function(e){return m.collection("orders").doc(e).get().then((function(e){var t=e.data().endTime.toDate().getTime()-e.data().time.toDate().getTime(),n=Math.floor(t/1e3),c=parseInt(n/60);return n%=60,"".concat(c,":").concat(n)}))},updateTime:function(e,t){return m.collection("orders").doc(e).update({finalTime:t})},updateOrder:function(e,t){m.collection("orders").doc(e).update({endTime:new Date,status:t})}};h.a.setAppElement("#root");var f=function(e){var t=e.onNotificationChange,n=e.status,a=Object(i.useState)([]),r=Object(l.a)(a,2),s=r[0],o=r[1],u=Object(i.useState)(!1),j=Object(l.a)(u,2),b=j[0],O=j[1],m=Object(i.useState)(),f=Object(l.a)(m,2),x=f[0],v=f[1],g=Object(d.f)();Object(i.useEffect)((function(){var e=!1;return p.getOrder((function(t){e||o(t)}),n),function(){e=!0}}),[]);return Object(c.jsxs)("section",{className:"list-orders-section",children:[s.map((function(e,t){return Object(c.jsxs)("div",{className:"orders",children:[Object(c.jsx)("div",{className:"order-number",children:Object(c.jsxs)("p",{children:["Nro.",t+1]})}),Object(c.jsxs)("div",{className:"detailes-order",children:[Object(c.jsx)("p",{children:e.table}),null===e.endTime?"":Object(c.jsx)("p",{className:"timer",children:e.finalTime}),Object(c.jsxs)("p",{children:[new Date(1e3*e.time.seconds).getHours(),":",new Date(1e3*e.time.seconds).getMinutes(),":",new Date(1e3*e.time.seconds).getSeconds()]})]}),"/delivery"===g.pathname?Object(c.jsxs)("p",{children:["Cliente:",e.client]}):"",Object(c.jsx)("ul",{className:"items-order",children:e.items.map((function(e){return Object(c.jsxs)("li",{className:"items-order-detail",children:[Object(c.jsx)("p",{children:e.quantity}),Object(c.jsx)("p",{children:e.product})]},e.id)}))}),Object(c.jsx)("button",{type:"button",className:e.status,onClick:function(){v(e.id),O(!0)},children:e.status})]},e.id)})),Object(c.jsxs)(h.a,{className:"Modal",overlayClassName:"Overlay",isOpen:b,onRequestClose:function(){return O(!1)},children:[Object(c.jsx)("h2",{children:"\xbfAre you sure?"}),Object(c.jsxs)("div",{className:"buttons-modal",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return O(!1)},children:"Close"}),Object(c.jsx)("button",{type:"button",onClick:function(){!function(e){var n=new Date;p.updateOrder(e,n),p.getFinalTime(e).then((function(t){p.updateTime(e,t)})),t([e]),"/kitchen"===g.pathname?p.updateOrder(e,"Done"):p.updateOrder(e,"Delivered")}(x),O(!1)},children:"Yes"})]})]})]})},x=function(e){var t=e.handleInputChange,n=e.resetInput,i=function(e){t(e.target)};return Object(c.jsxs)("div",{className:"input-section",children:[Object(c.jsx)("input",{className:"input",type:"text",placeholder:"Client name",name:"client",onChange:i,value:n.client}),Object(c.jsx)("select",{className:"select",name:"table",onChange:i,value:n.table,children:["Select a table","A1","A2","A3"].map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}))})]})},v=n(30),g=function(e){var t=e.itemProduct,n=e.onDelete;return Object(c.jsxs)("li",{className:"item-order",children:[Object(c.jsx)("p",{className:"item-quantity",children:t.quantity}),Object(c.jsx)("p",{className:"order-name",children:t.description}),Object(c.jsxs)("p",{className:"order-price",children:["S/.",t.price]}),Object(c.jsx)("span",{className:"material-icons order",onClick:function(){return n(t)},"aria-hidden":"true",role:"button",tabIndex:0,children:"delete_outline"})]})},N=function(e){var t=e.selectProduct,n=e.itemProduct;return Object(c.jsxs)("div",{className:"item-product",onClick:function(){return t(n)},"aria-hidden":"true",role:"button",tabIndex:0,children:[Object(c.jsx)("p",{className:"item-name",children:n.description}),Object(c.jsxs)("p",{className:"item-price",children:["S/.",n.price]}),Object(c.jsx)("img",{className:"item-img",src:n.photo,alt:"img-product"})]})},y=function(e){var t=e.typeFood,n=e.addOrder,a=e.cleanInput,r=Object(i.useState)([]),s=Object(l.a)(r,2),o=s[0],d=s[1],j=Object(i.useState)([]),b=Object(l.a)(j,2),h=b[0],O=b[1];function m(e){if(-1!==h.findIndex((function(t){return t.id===e.id})))O(h.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),{},{quantity:t.quantity+1}):t})));else{var t=Object(u.a)(Object(u.a)({},e),{},{quantity:1});O([].concat(Object(v.a)(h),[t]))}}var f=h.reduce((function(e,t){return e+t.price*t.quantity}),0);Object(i.useEffect)((function(){p.getMenu(e.typeFood).then((function(e){d(e)}))}),[t]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("ul",{className:"display-list-product",children:o.map((function(e){return Object(c.jsx)(N,{itemProduct:e,selectProduct:m},e.id)}))}),Object(c.jsxs)("ul",{className:"display-list-order",children:[Object(c.jsx)("div",{className:"each-list-order",children:h.map((function(e,t){return Object(c.jsx)(g,{itemProduct:e,onDelete:function(){return function(e){var t=Object(v.a)(h);t.splice(e,1),O(t)}(t)}},e.id)}))}),Object(c.jsxs)("div",{className:"price-total",children:["Total S/.",f]}),Object(c.jsx)("button",{type:"button",className:"button",onClick:function(){n(h),a(),O([])},children:"Tomar pedido"})]})]})},C=(n(61),function(e){var t=e.handleInputChange,n=e.resetInput,a=e.addOrder,r=e.cleanInput,s=Object(i.useState)(),o=Object(l.a)(s,2),u=o[0],d=o[1],j=Object(i.useState)("desayuno"),b=Object(l.a)(j,2),h=b[0],O=b[1];return p.getOrdersDone().then((function(e){d(e.length)})),Object(c.jsxs)("section",{className:"order-view-section",children:[Object(c.jsxs)("div",{className:"btn-section",children:[Object(c.jsx)("button",{type:"button",className:"button menu",onClick:function(){O("desayuno")},children:"Desayuno"}),Object(c.jsx)("button",{type:"button",className:"button menu",onClick:function(){O("almuerzo y cena")},children:"Almuerzo y cena"})]}),Object(c.jsxs)("div",{className:"notifications",children:[Object(c.jsx)("p",{children:u}),Object(c.jsx)("span",{className:"material-icons notification-order-done",children:"notifications"})]}),Object(c.jsx)(x,{handleInputChange:t,resetInput:n}),Object(c.jsx)(y,{typeFood:h,addOrder:a,cleanInput:r})]})}),I=(n(62),function(e){var t=e.nroNotifications;return Object(c.jsxs)("header",{children:[Object(c.jsx)("a",{href:"/",children:Object(c.jsx)("img",{src:"https://user-images.githubusercontent.com/68167686/103605203-4e1c0780-4ee1-11eb-8c96-0d1379f88bf5.png",alt:""})}),Object(c.jsx)("nav",{className:"directions-links",children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{to:{pathname:"/waiter",state:t},activeClassName:"active",children:"Waiter"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{to:"/kitchen",activeClassName:"active",children:"Kitchen"},window.location.pathname)}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{to:"/delivery",activeClassName:"active",children:"Delivery"},window.location.pathname)})]})})]})}),D=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=function(e){a(n.concat(e))},b={client:"",table:""},h="Pending",O="Done",m=Object(i.useState)(b),x=Object(l.a)(m,2),v=x[0],g=x[1];return Object(c.jsxs)(s.a,{basename:"/VeroSilva/LIM013-fe-burger-queen",children:[Object(c.jsx)(I,{nroNotifications:n}),Object(c.jsxs)(d.c,{children:[Object(c.jsx)(d.a,{path:"/waiter",children:Object(c.jsx)(C,{addOrder:function(e){var t=e.map((function(e){var t={};return t.product=e.description,t.quantity=e.quantity,t}));v===b||0===t.length?alert("Termine de completar para registrar su orden"):p.createOrder(t,v)},handleInputChange:function(e){var t=e.name,n=e.value;g(Object(u.a)(Object(u.a)({},v),{},Object(o.a)({},t,n)))},resetInput:v,cleanInput:function(){g(Object(u.a)({},b))}})}),Object(c.jsx)(d.a,{path:"/kitchen",component:function(){return Object(c.jsx)(f,{onNotificationChange:r,status:h})}}),Object(c.jsx)(d.a,{path:"/delivery",component:function(){return Object(c.jsx)(f,{onNotificationChange:r,status:O})}}),Object(c.jsx)(d.a,{path:"/",children:Object(c.jsx)(j,{})})]})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};r.a.render(Object(c.jsx)(s.a,{children:Object(c.jsx)(D,{})}),document.getElementById("root")),w()}},[[63,1,2]]]);
//# sourceMappingURL=main.ccf01857.chunk.js.map